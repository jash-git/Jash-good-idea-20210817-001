(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.ES6Promise=factory()})(this,function(){"use strict";function objectOrFunction(x){return typeof x==="function"||typeof x==="object"&&x!==null}function isFunction(x){return typeof x==="function"}var _isArray=undefined;if(!Array.isArray){_isArray=function(x){return Object.prototype.toString.call(x)==="[object Array]"}}else{_isArray=Array.isArray}var isArray=_isArray;var len=0;var vertxNext=undefined;var customSchedulerFn=undefined;var asap=function asap(callback,arg){queue[len]=callback;queue[len+1]=arg;len+=2;if(len===2){if(customSchedulerFn){customSchedulerFn(flush)}else{scheduleFlush()}}};function setScheduler(scheduleFn){customSchedulerFn=scheduleFn}function setAsap(asapFn){asap=asapFn}var browserWindow=typeof window!=="undefined"?window:undefined;var browserGlobal=browserWindow||{};var BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver;var isNode=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var isWorker=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function useNextTick(){return function(){return process.nextTick(flush)}}function useVertxTimer(){return function(){vertxNext(flush)}}function useMutationObserver(){var iterations=0;var observer=new BrowserMutationObserver(flush);var node=document.createTextNode("");observer.observe(node,{characterData:true});return function(){node.data=iterations=++iterations%2}}function useMessageChannel(){var channel=new MessageChannel;channel.port1.onmessage=flush;return function(){return channel.port2.postMessage(0)}}function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}var queue=new Array(1e3);function flush(){for(var i=0;i<len;i+=2){var callback=queue[i];var arg=queue[i+1];callback(arg);queue[i]=undefined;queue[i+1]=undefined}len=0}function attemptVertx(){try{var r=require;var vertx=r("vertx");vertxNext=vertx.runOnLoop||vertx.runOnContext;return useVertxTimer()}catch(e){return useSetTimeout()}}var scheduleFlush=undefined;if(isNode){scheduleFlush=useNextTick()}else if(BrowserMutationObserver){scheduleFlush=useMutationObserver()}else if(isWorker){scheduleFlush=useMessageChannel()}else if(browserWindow===undefined&&typeof require==="function"){scheduleFlush=attemptVertx()}else{scheduleFlush=useSetTimeout()}function then(onFulfillment,onRejection){var _arguments=arguments;var parent=this;var child=new this.constructor(noop);if(child[PROMISE_ID]===undefined){makePromise(child)}var _state=parent._state;if(_state){(function(){var callback=_arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result)})})()}else{subscribe(parent,child,onFulfillment,onRejection)}return child}function resolve(object){var Constructor=this;if(object&&typeof object==="object"&&object.constructor===Constructor){return object}var promise=new Constructor(noop);_resolve(promise,object);return promise}var PROMISE_ID=Math.random().toString(36).substring(16);function noop(){}var PENDING=void 0;var FULFILLED=1;var REJECTED=2;var GET_THEN_ERROR=new ErrorObject;function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function getThen(promise){try{return promise.then}catch(error){GET_THEN_ERROR.error=error;return GET_THEN_ERROR}}function tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleForeignThenable(promise,thenable,then){asap(function(promise){var sealed=false;var error=tryThen(then,thenable,function(value){if(sealed){return}sealed=true;if(thenable!==value){_resolve(promise,value)}else{fulfill(promise,value)}},function(reason){if(sealed){return}sealed=true;_reject(promise,reason)},"Settle: "+(promise._label||" unknown promise"));if(!sealed&&error){sealed=true;_reject(promise,error)}},promise)}function handleOwnThenable(promise,thenable){if(thenable._state===FULFILLED){fulfill(promise,thenable._result)}else if(thenable._state===REJECTED){_reject(promise,thenable._result)}else{subscribe(thenable,undefined,function(value){return _resolve(promise,value)},function(reason){return _reject(promise,reason)})}}function handleMaybeThenable(promise,maybeThenable,then$$){if(maybeThenable.constructor===promise.constructor&&then$$===then&&maybeThenable.constructor.resolve===resolve){handleOwnThenable(promise,maybeThenable)}else{if(then$$===GET_THEN_ERROR){_reject(promise,GET_THEN_ERROR.error)}else if(then$$===undefined){fulfill(promise,maybeThenable)}else if(isFunction(then$$)){handleForeignThenable(promise,maybeThenable,then$$)}else{fulfill(promise,maybeThenable)}}}function _resolve(promise,value){if(promise===value){_reject(promise,selfFulfillment())}else if(objectOrFunction(value)){handleMaybeThenable(promise,value,getThen(value))}else{fulfill(promise,value)}}function publishRejection(promise){if(promise._onerror){promise._onerror(promise._result)}publish(promise)}function fulfill(promise,value){if(promise._state!==PENDING){return}promise._result=value;promise._state=FULFILLED;if(promise._subscribers.length!==0){asap(publish,promise)}}function _reject(promise,reason){if(promise._state!==PENDING){return}promise._state=REJECTED;promise._result=reason;asap(publishRejection,promise)}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers;var length=_subscribers.length;parent._onerror=null;_subscribers[length]=child;_subscribers[length+FULFILLED]=onFulfillment;_subscribers[length+REJECTED]=onRejection;if(length===0&&parent._state){asap(publish,parent)}}function publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return}var child=undefined,callback=undefined,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){invokeCallback(settled,child,callback,detail)}else{callback(detail)}}promise._subscribers.length=0}function ErrorObject(){this.error=null}var TRY_CATCH_ERROR=new ErrorObject;function tryCatch(callback,detail){try{return callback(detail)}catch(e){TRY_CATCH_ERROR.error=e;return TRY_CATCH_ERROR}}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=undefined,error=undefined,succeeded=undefined,failed=undefined;if(hasCallback){value=tryCatch(callback,detail);if(value===TRY_CATCH_ERROR){failed=true;error=value.error;value=null}else{succeeded=true}if(promise===value){_reject(promise,cannotReturnOwn());return}}else{value=detail;succeeded=true}if(promise._state!==PENDING){}else if(hasCallback&&succeeded){_resolve(promise,value)}else if(failed){_reject(promise,error)}else if(settled===FULFILLED){fulfill(promise,value)}else if(settled===REJECTED){_reject(promise,value)}}function initializePromise(promise,resolver){try{resolver(function resolvePromise(value){_resolve(promise,value)},function rejectPromise(reason){_reject(promise,reason)})}catch(e){_reject(promise,e)}}var id=0;function nextId(){return id++}function makePromise(promise){promise[PROMISE_ID]=id++;promise._state=undefined;promise._result=undefined;promise._subscribers=[]}function Enumerator(Constructor,input){this._instanceConstructor=Constructor;this.promise=new Constructor(noop);if(!this.promise[PROMISE_ID]){makePromise(this.promise)}if(isArray(input)){this._input=input;this.length=input.length;this._remaining=input.length;this._result=new Array(this.length);if(this.length===0){fulfill(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){fulfill(this.promise,this._result)}}}else{_reject(this.promise,validationError())}}function validationError(){return new Error("Array Methods must be provided an Array")}Enumerator.prototype._enumerate=function(){var length=this.length;var _input=this._input;for(var i=0;this._state===PENDING&&i<length;i++){this._eachEntry(_input[i],i)}};Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor;var resolve$$=c.resolve;if(resolve$$===resolve){var _then=getThen(entry);if(_then===then&&entry._state!==PENDING){this._settledAt(entry._state,i,entry._result)}else if(typeof _then!=="function"){this._remaining--;this._result[i]=entry}else if(c===Promise){var promise=new c(noop);handleMaybeThenable(promise,entry,_then);this._willSettleAt(promise,i)}else{this._willSettleAt(new c(function(resolve$$){return resolve$$(entry)}),i)}}else{this._willSettleAt(resolve$$(entry),i)}};Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;if(promise._state===PENDING){this._remaining--;if(state===REJECTED){_reject(promise,value)}else{this._result[i]=value}}if(this._remaining===0){fulfill(promise,this._result)}};Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;subscribe(promise,undefined,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})};function all(entries){return new Enumerator(this,entries).promise}function race(entries){var Constructor=this;if(!isArray(entries)){return new Constructor(function(_,reject){return reject(new TypeError("You must pass an array to race."))})}else{return new Constructor(function(resolve,reject){var length=entries.length;for(var i=0;i<length;i++){Constructor.resolve(entries[i]).then(resolve,reject)}})}}function reject(reason){var Constructor=this;var promise=new Constructor(noop);_reject(promise,reason);return promise}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Promise(resolver){this[PROMISE_ID]=nextId();this._result=this._state=undefined;this._subscribers=[];if(noop!==resolver){typeof resolver!=="function"&&needsResolver();this instanceof Promise?initializePromise(this,resolver):needsNew()}}Promise.all=all;Promise.race=race;Promise.resolve=resolve;Promise.reject=reject;Promise._setScheduler=setScheduler;Promise._setAsap=setAsap;Promise._asap=asap;Promise.prototype={constructor:Promise,then:then,catch:function _catch(onRejection){return this.then(null,onRejection)}};function polyfill(){var local=undefined;if(typeof global!=="undefined"){local=global}else if(typeof self!=="undefined"){local=self}else{try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if(promiseToString==="[object Promise]"&&!P.cast){return}}local.Promise=Promise}polyfill();Promise.polyfill=polyfill;Promise.Promise=Promise;return Promise});if(typeof JSON!=="object"){JSON={}}(function(){"use strict";var rx_one=/^[\],:{}\s]*$/;var rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var rx_four=/(?:^|:|,)(?:\s*\[)+/g;var rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function f(n){return n<10?"0"+n:n}function this_value(){return this.valueOf()}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};Boolean.prototype.toJSON=this_value;Number.prototype.toJSON=this_value;String.prototype.toJSON=this_value}var gap;var indent;var meta;var rep;function quote(string){rx_escapable.lastIndex=0;return rx_escapable.test(string)?'"'+string.replace(rx_escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i;var k;var v;var length;var mind=gap;var partial;var value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k;var v;var value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);rx_dangerous.lastIndex=0;if(rx_dangerous.test(text)){text=text.replace(rx_dangerous,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();var timer;var varNIUA;var niupSessionUpdateTime;var niupLastActivityTime;function NIUA(appConfig){this.appConfig=appConfig}NIUA.getNIUA=function(appConfig){if(!appConfig.hasOwnProperty("minutesBeforeExpire")){appConfig.minutesBeforeExpire=5}if(!appConfig.hasOwnProperty("apikey")){appConfig.apikey="there_is_no_apikey"}var niua=new NIUA(appConfig);return niua};NIUA.prototype.ready=function(){var promise=new Promise(function(resolve,reject){console.log("NIUA instance has been initialized.");resolve()});return promise};NIUA.prototype.isIE=function(){ua=navigator.userAgent;var is_ie=ua.indexOf("MSIE ")>-1||ua.indexOf("Trident/")>-1;return is_ie};NIUA.prototype.getCookie=function(cname){var name=cname+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1)}if(c.indexOf(name)==0){return c.substring(name.length,c.length)}}return null};NIUA.prototype.getSession=function(){var that=this;var promise=new Promise(function(resolve,reject){var session={};var profileId=that.getCookie("profile_id");if(profileId!=null){session={loggedIn:true,profileId:profileId}}else{session={loggedIn:false}}resolve(session)});return promise};NIUA.prototype.getEmail=function(){var that=this;var promise=new Promise(function(resolve,reject){var data={};if(that.getCookie("profile_id")!=null){if(sessionStorage.getItem("NIUA_email_addr")){var returnedValue=JSON.parse(sessionStorage.getItem("NIUA_email_addr"));var expiryTime=(new Date).getTime()-that.appConfig.minutesBeforeExpire*60*1e3;if(parseInt(returnedValue.timestamp)<expiryTime){data=JSON.parse(sessionStorage.getItem("NIUA_email_addr"));that.getResponse().then(function(result){data={response:result,timestamp:(new Date).getTime()};sessionStorage.setItem("NIUA_email_addr",JSON.stringify(data))})["catch"](function(error){data={response:{email:"webservice_error",success:false},timestamp:(new Date).getTime()};console.log(error)});resolve(data)}else{data=JSON.parse(sessionStorage.getItem("NIUA_email_addr"));resolve(data)}}else{that.getResponse().then(function(result){data={response:result,timestamp:(new Date).getTime()};sessionStorage.setItem("NIUA_email_addr",JSON.stringify(data));resolve(data)})["catch"](function(error){data={response:{email:"webservice_error",success:false},timestamp:(new Date).getTime()};console.log(error);resolve(data)})}}else{data={response:{email:"user_not_logged_in",success:false},timestamp:(new Date).getTime()};sessionStorage.removeItem("NIUA_email_addr");resolve(data)}});return promise};NIUA.prototype.getMonogram=function(){var that=this;var promise=new Promise(function(resolve,reject){var data={};if(that.getCookie("profile_id")!=null){if(sessionStorage.getItem("NIUA_monogram")){var returnedValue=JSON.parse(sessionStorage.getItem("NIUA_monogram"));var expiryTime=(new Date).getTime()-that.appConfig.minutesBeforeExpire*60*1e3;if(parseInt(returnedValue.timestamp)<expiryTime){data=JSON.parse(sessionStorage.getItem("NIUA_monogram"));that.getResponse("monogram").then(function(result){data={response:result,timestamp:(new Date).getTime()};sessionStorage.setItem("NIUA_monogram",JSON.stringify(data));resolve(data)})["catch"](function(error){data={response:{success:false},timestamp:(new Date).getTime()};console.log(error);resolve(data)})}else{data=JSON.parse(sessionStorage.getItem("NIUA_monogram"));resolve(data)}}else{that.getResponse("monogram").then(function(result){data={response:result,timestamp:(new Date).getTime()};sessionStorage.setItem("NIUA_monogram",JSON.stringify(data));resolve(data)})["catch"](function(error){data={response:{success:false},timestamp:(new Date).getTime()};console.log(error);resolve(data)})}}else{data={response:{success:false},timestamp:(new Date).getTime()};sessionStorage.removeItem("NIUA_monogram");resolve(data)}});return promise};NIUA.prototype.getDetails=function(){var that=this;var promise=new Promise(function(resolve,reject){var data={};if(that.getCookie("profile_id")!=null){if(sessionStorage.getItem("NIUA_details")){var returnedValue=JSON.parse(sessionStorage.getItem("NIUA_details"));var expiryTime=(new Date).getTime()-that.appConfig.minutesBeforeExpire*60*1e3;if(parseInt(returnedValue.timestamp)<expiryTime){data=JSON.parse(sessionStorage.getItem("NIUA_details"));that.getResponse("details").then(function(result){data={response:result,timestamp:(new Date).getTime()};sessionStorage.setItem("NIUA_details",JSON.stringify(data));resolve(data)})["catch"](function(error){data={response:{success:false},timestamp:(new Date).getTime()};console.log(error);resolve(data)})}else{data=JSON.parse(sessionStorage.getItem("NIUA_details"));resolve(data)}}else{that.getResponse("details").then(function(result){data={response:result,timestamp:(new Date).getTime()};sessionStorage.setItem("NIUA_details",JSON.stringify(data));resolve(data)})["catch"](function(error){data={response:{success:false},timestamp:(new Date).getTime()};console.log(error);resolve(data)})}}else{data={response:{success:false},timestamp:(new Date).getTime()};sessionStorage.removeItem("NIUA_details");resolve(data)}});return promise};NIUA.prototype.getEnvFromUrl=function(){if(location.hostname.indexOf("-test2")>-1){return"-test2"}else if(location.hostname.indexOf("-test")>-1){return"-test"}else if(location.hostname.indexOf("-dev2")>-1){return"-dev2"}else if(location.hostname.indexOf("-dev")>-1){return"-dev"}else{return""}};NIUA.prototype.getResponse=function(requestedResource){var that=this;if(requestedResource===undefined||requestedResource===null){requestedResource="email"}return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest;xhr.open("GET","//flux"+that.getEnvFromUrl()+".ni.com/niuadataservice/1/resources/"+requestedResource);xhr.withCredentials=true;that.addAuthorization(xhr);that.addApiKey(xhr);xhr.onreadystatechange=function(){if(xhr.readyState===4){if(xhr.status===200){resolve(JSON.parse(xhr.response))}else{reject(JSON.parse(xhr.response))}}};xhr.send()})};NIUA.prototype.createNIAuthToken=function(){var profile_id=this.getCookie("profile_id");var rma=this.getCookie("rma");var rmac=this.getCookie("rmac");var upsid=this.getCookie("upsid");if(this.getCookie("profile_id")!=null){if(rma==null)rma="";if(rmac==null)rmac="";if(upsid==null)upsid="";return"1|"+btoa(profile_id+"|"+rma+"|"+rmac+"|"+upsid)}else{return null}};NIUA.prototype.addAuthorization=function(xhr){var niAuthToken=this.createNIAuthToken();if(niAuthToken!=null){xhr.setRequestHeader("X-NI-Auth-Token",niAuthToken)}};NIUA.prototype.addApiKey=function(xhr){if(this.appConfig.apikey!=undefined&&this.appConfig.apikey!=null){xhr.setRequestHeader("X-NI-API-KEY",this.appConfig.apikey)}};NIUA.prototype.callUpdateSession=function(updateData){var that=this;return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest;var payload=JSON.stringify(updateData);xhr.open("POST","//flux"+that.getEnvFromUrl()+".ni.com/niuadataservice/1/resources/updateSession");xhr.withCredentials=true;that.addAuthorization(xhr);that.addApiKey(xhr);xhr.setRequestHeader("Content-Type","application/json; charset=utf-8");xhr.setRequestHeader("Accept","application/json");xhr.onreadystatechange=function(){if(xhr.readyState===4){if(xhr.status===201){resolve(JSON.parse(xhr.response))}else{reject(JSON.parse(xhr.response))}}};xhr.send(payload)})};NIUA.prototype.updateSession=function(){niupSessionUpdateTime=(new Date).getTime();var upsid=varNIUA.getCookie("upsid");if(upsid!=null){var data={upsid:upsid,timestamp:niupLastActivityTime};varNIUA.callUpdateSession(data).then(function(result){varNIUA.setTimer(result.relativeTimeout)})["catch"](function(error){console.log(error)})}};NIUA.prototype.setNIUPActivity=function(){niupLastActivityTime=(new Date).getTime()};NIUA.prototype.setTimer=function(sessionTimeout){var timeLeft;var timeLeftInMinutes;if(timer==undefined){timeLeft=(sessionTimeout-1)*60*1e3;timeLeftInMinutes=timeLeft/6e4;timer=setTimeout(varNIUA.updateSession,timeLeft)}else{timeLeft=niupLastActivityTime+(sessionTimeout-1)*30*1e3-niupSessionUpdateTime;timeLeftInMinutes=timeLeft/6e4;if(timeLeft>0){timer=setTimeout(varNIUA.updateSession,timeLeft)}}};$(document).ready(function(){if(!NIUA.prototype.getCookie("profile_id")){sessionStorage.removeItem("NIUA_email_addr");sessionStorage.removeItem("NIUA_details")}varNIUA=NIUA.getNIUA({minutesBeforeExpire:2,apikey:"3b7c1d3b-275d-4683-a459-36e3d1d21776"});varNIUA.setNIUPActivity();varNIUA.updateSession();if(window.addEventListener){window.addEventListener("click",function(){varNIUA.setNIUPActivity()},false);window.addEventListener("touchstart",function(){varNIUA.setNIUPActivity()},false);window.addEventListener("keypress",function(){varNIUA.setNIUPActivity()},false)}else{window.attachEvent("onclick",function(){varNIUA.setNIUPActivity()});window.attachEvent("ontouchstart",function(){varNIUA.setNIUPActivity()});window.attachEvent("onkeypress",function(){varNIUA.setNIUPActivity()})}});
